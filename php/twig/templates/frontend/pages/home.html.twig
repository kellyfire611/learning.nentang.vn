{# Kế thừa layout frontend #}
{% extends "frontend/layouts/layout.html.twig" %}

{# Nội dung trong block title #}
{% block title %}
Bảng tin
{% endblock %}
{# End Nội dung trong block title #}

{% block customstyles %}
<!-- Add CSS thư viện SLICK -->
<link rel="stylesheet" type="text/css" href="/assets/vendor/slick/slick.css"/>
<link rel="stylesheet" type="text/css" href="/assets/vendor/slick/slick-theme.css"/>

<style>
    * {
        box-sizing: border-box
    }

    /* Container needed to position the overlay. Adjust the width as needed */
    .container-img {
        position: relative;
    }

    /* Make the image to responsive */
    .image {
        display: block;
        width: 100%;
        height: auto;
    }

    /* The overlay effect - lays on top of the container and over the image */
    .overlay-img {
        position: absolute;
        bottom: 0;
        background: rgb(0, 0, 0);
        background: rgba(0, 0, 0, 0.5);
        /* Black see-through */
        color: #f1f1f1;
        width: 100%;
        transition: .5s ease;
        opacity: 0;
        color: white;
        font-size: 20px;
        padding: 20px;
        text-align: center;
    }

    /* When you mouse over the container, fade in the overlay title */
    .container-img:hover .overlay-img {
        opacity: 1;
    }
</style>
{% endblock %}

{# Nội dung trong block headline #}
{% block headline %}
Bảng tin
{% endblock %}
{# End Nội dung trong block headline #}

{# Nội dung trong block content #}
{% block content %}
<!-- Carousel - Slider -->
<div id="myCarousel" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
        <li data-target="#myCarousel" data-slide-to="2"></li>
    </ol>
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img src="/assets/frontend/img/slider-1.jpg" />
            <div class="container">
                <div class="carousel-caption text-left">
                    <h1>Nền Tảng - Nơi mua sắm tuyệt vời</h1>

                </div>
            </div>
        </div>
        <div class="carousel-item">
            <img src="/assets/frontend/img/slider-2.jpg" />
            <div class="container">
                <div class="carousel-caption">
                    <h1>Hàng triệu sản phẩm - Lựa chọn mỏi tay</h1>

                </div>
            </div>
        </div>
        <div class="carousel-item">
            <img src="/assets/frontend/img/slider-3.jpg" />
            <div class="container">
                <div class="carousel-caption text-right">
                    <h1>Chất lượng là Hàng đầu.</h1>

                </div>
            </div>
        </div>
    </div>
    <a class="carousel-control-prev" href="#myCarousel" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#myCarousel" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>

<!-- Tính năng Marketing -->
<div class="container marketing">
    <!-- Three columns of text below the carousel -->
    <div class="row">
        <div class="col-lg-4">
            <img class="bd-placeholder-img rounded-circle" width="140" height="140"
                src="/assets/frontend/img/icon-1.png" />
            <h2>Đặt hàng</h2>
            <p>Chọn sản phẩm bạn yêu thích, và Đặt hàng.</p>
        </div><!-- /.col-lg-4 -->
        <div class="col-lg-4">
            <img class="bd-placeholder-img rounded-circle" width="140" height="140"
                src="/assets/frontend/img/icon-2.png" />
            <h2>Tạo đơn hàng</h2>
            <p>Theo dõi đơn hàng của bạn.</p>
        </div><!-- /.col-lg-4 -->
        <div class="col-lg-4">
            <img class="bd-placeholder-img rounded-circle" width="140" height="140"
                src="/assets/frontend/img/icon-3.png" />
            <h2>Giao hàng</h2>
            <p>Giao hàng tận nơi.</p>
        </div><!-- /.col-lg-4 -->
    </div><!-- /.row -->


    <!-- START THE FEATURETTES -->

    <hr class="featurette-divider">

    <div class="row featurette">
        <div class="col-md-7">
            <h2 class="featurette-heading">Đặt hàng, Tạo đơn hàng, Giao hàng <span class="text-muted">Nhanh chóng</span>
            </h2>
            <p class="lead">Nơi mua sắm tuyệt vời cho mọi lứa tuổi.</p>
        </div>
        <div class="col-md-5">
            <img src="/assets/frontend/img/marketing-1.png" />
        </div>
    </div>

    <hr class="featurette-divider">

    <div class="row featurette">
        <div class="col-md-7 order-md-2">
            <h2 class="featurette-heading">Báo cáo Doanh thu tuyệt vời <span class="text-muted">Theo dõi đơn hàng của
                    bạn.</span></h2>
            <p class="lead">Hệ thống theo dõi đơn hàng chi tiết, thông tin mọi lúc mọi nơi.</p>
        </div>
        <div class="col-md-5 order-md-1">
            <img src="/assets/frontend/img/marketing-2.png" />
        </div>
    </div>

    <hr class="featurette-divider">

    <!-- /END THE FEATURETTES -->

</div>

<!-- Top 5 sản phẩm Nổi bật -->
<section class="jumbotron text-center">
    <div class="container">
        <h1 class="jumbotron-heading">Sản phẩm NỔI BẬT</h1>
        <p class="lead text-muted">Các sản phẩm với chất lượng, uy tín, cam kết từ nhà Sản xuất, phân phối và bảo hành
            chính hãng.</p>
    </div>
</section>

<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="slider slider-nav slider-featured-products">
                {% for product in featuredProducts %}
                <div class="card mb-4 shadow-sm">
                    <div class="card-header">
                        <div class="ribbon-wrapper">
                            <div class="ribbon green">NỔI BẬT</div>
                        </div>

                        {% if product.image %}
                        <div class="container-img">
                            <a href="/frontend/product/detail.php?id={{ product.id }}">
                                <img class="bd-placeholder-img card-img-top" width="100%" height="350"
                                    src="/assets/uploads/{{ product.image }}" />
                            </a>
                            <div class="overlay-img">
                                <a href="https://nentang.vn">Nền tảng - Hành trang tới tương lai</a>
                            </div>
                        </div>

                        {% else %}
                        <div class="container-img">
                            <a href="/frontend/product/detail.php?id={{ product.id }}">
                                <img class="bd-placeholder-img card-img-top" width="100%" height="350"
                                    src="/assets/shared/img/default-image_600.png" />
                            </a>
                            <div class="overlay-img">
                                <a href="https://nentang.vn">Nền tảng - Hành trang tới tương lai</a>
                            </div>
                        </div>
                        {% endif %}
                    </div>
                    <div class="card-body">
                        <a href="/frontend/product/detail.php?id={{ product.id }}">
                            <h5>{{ product.product_name }}</h5>
                        </a>
                        <h6>{{ product.category_name }}</h6>
                        <p class="card-text">{{ product.short_description }}</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="btn-group">
                                <a class="btn btn-sm btn-outline-secondary"
                                    href="/frontend/product/detail.php?id={{ product.id }}">Xem chi tiết</a>
                            </div>
                            <small class="text-muted text-right">
                                <s>{{ product.sp_giacu }}</s>
                                <b>{{ product.sp_gia }}</b>
                            </small>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

<!-- Top 5 sản phẩm Mới nhất -->
<section class="jumbotron text-center">
    <div class="container">
        <h1 class="jumbotron-heading">Sản phẩm MỚI NHẤT</h1>
        <p class="lead text-muted">Các sản phẩm với chất lượng, uy tín, cam kết từ nhà Sản xuất, phân phối và bảo hành
            chính hãng.</p>
    </div>
</section>

<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="slider slider-nav slider-new-products">
                {% for product in newProducts %}
                <div class="card mb-4 shadow-sm">
                    <div class="card-header">
                        <div class="ribbon-wrapper">
                            <div class="ribbon red">MỚI</div>
                        </div>

                        {% if product.image %}
                        <div class="container-img">
                            <a href="/frontend/product/detail.php?id={{ product.id }}">
                                <img class="bd-placeholder-img card-img-top" width="100%" height="350"
                                    src="/assets/uploads/{{ product.image }}" />
                            </a>
                            <div class="overlay-img">
                                <a href="https://nentang.vn">Nền tảng - Hành trang tới tương lai</a>
                            </div>
                        </div>

                        {% else %}
                        <div class="container-img">
                            <a href="/frontend/product/detail.php?id={{ product.id }}">
                                <img class="bd-placeholder-img card-img-top" width="100%" height="350"
                                    src="/assets/shared/img/default-image_600.png" />
                            </a>
                            <div class="overlay-img">
                                <a href="https://nentang.vn">Nền tảng - Hành trang tới tương lai</a>
                            </div>
                        </div>
                        {% endif %}
                    </div>
                    <div class="card-body">
                        <a href="/frontend/product/detail.php?id={{ product.id }}">
                            <h5>{{ product.product_name }}</h5>
                        </a>
                        <h6>{{ product.category_name }}</h6>
                        <p class="card-text">{{ product.short_description }}</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="btn-group">
                                <a class="btn btn-sm btn-outline-secondary"
                                    href="/frontend/product/detail.php?id={{ product.id }}">Xem chi tiết</a>
                            </div>
                            <small class="text-muted text-right">
                                <s>{{ product.sp_giacu }}</s>
                                <b>{{ product.sp_gia }}</b>
                            </small>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

<!-- Danh sách sản phẩm -->
<section class="jumbotron text-center">
    <div class="container">
        <h1 class="jumbotron-heading">Danh sách Sản phẩm</h1>
        <p class="lead text-muted">Các sản phẩm với chất lượng, uy tín, cam kết từ nhà Sản xuất, phân phối và bảo hành
            chính hãng.</p>
    </div>
</section>

<!-- Giải thuật duyệt và render Danh sách sản phẩm theo dòng, cột của Bootstrap -->
{% set counter = 0 %}
{% set group = 3 %}
{% set limit = products|length %}
{% set col_class_name = (12 / group) %}
<div class="products py-5 bg-light">
    <div class="container">
        <div class="row">
            {% for product in products.data %}
            <div class="col-md-{{ col_class_name }}">
                <div class="card mb-4 shadow-sm">
                    <div class="card-header">
                        <div class="ribbon-wrapper">
                            <div class="ribbon red">MỚI</div>
                        </div>
    
                        {% if product.image %}
                        <div class="container-img">
                            <a href="/frontend/product/detail.php?id={{ product.id }}">
                                <img class="bd-placeholder-img card-img-top" width="100%" height="350"
                                    src="/assets/uploads/{{ product.image }}" />
                            </a>
                            <div class="overlay-img">
                                <a href="https://nentang.vn">Nền tảng - Hành trang tới tương lai</a>
                            </div>
                        </div>
    
                        {% else %}
                        <div class="container-img">
                            <a href="/frontend/product/detail.php?id={{ product.id }}">
                                <img class="bd-placeholder-img card-img-top" width="100%" height="350"
                                    src="/assets/shared/img/default-image_600.png" />
                            </a>
                            <div class="overlay-img">
                                <a href="https://nentang.vn">Nền tảng - Hành trang tới tương lai</a>
                            </div>
                        </div>
                        {% endif %}
                    </div>
                    <div class="card-body">
                        <a href="/frontend/product/detail.php?id={{ product.id }}">
                            <h5>{{ product.product_name }}</h5>
                        </a>
                        <h6>{{ product.category_name }}</h6>
                        <p class="card-text">{{ product.short_description }}</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="btn-group">
                                <a class="btn btn-sm btn-outline-secondary"
                                    href="/frontend/product/detail.php?id={{ product.id }}">Xem chi tiết</a>
                            </div>
                            <small class="text-muted text-right">
                                <s>{{ product.sp_giacu }}</s>
                                <b>{{ product.sp_gia }}</b>
                            </small>
                        </div>
                    </div>
                </div>
            </div>
            {% set counter = counter + 1 %}
            {% if (counter % group == 0 and counter < limit) %}
        </div>
        <div class="row">
            {% endif %}

            {% endfor %}
        </div>
        {{ paginator.createLinks()|raw }}
    </div>
</div>

{% endblock %}
{# End Nội dung trong block content #}

{% block customscripts %}
<!-- Add JS thư viện SLICK -->
<script src="/assets/vendor/slick/slick.min.js"></script>

<script>
    $(function () {
        // Nếu ảnh bị hư => thay thế bằng ảnh mặc định
        $('img').on("error", function() {
            $(this).attr('src', '/assets/shared/img/default-image_600.png');
        });
        function imageLoaded(image) {
            // function to invoke for loaded image
            console.log(image);
        }
        $('div.danhsachproduct img').each(function () {
            if (this.complete) {
                imageLoaded.call(this);
            } else {
                $(this).one('load', imageLoaded);
            }
        });

        // Hiển thị SLIDER Sản phẩm Nổi bật
        $('.slider.slider-nav.slider-featured-products').slick({
            slidesToShow: 3,
            slidesToScroll: 1,
            dots: true,
            autoplay: true
        });
        // Hiển thị SLIDER Sản phẩm Mới nhất
        $('.slider.slider-nav.slider-new-products').slick({
            slidesToShow: 3,
            slidesToScroll: 1,
            dots: true,
            autoplay: true
        });
    });
</script>
{% endblock %}